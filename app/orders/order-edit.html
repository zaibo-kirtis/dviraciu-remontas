<form ng-submit="order.submit()">
<div class="container" style="margin-top: 12px" xmlns="">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">

            <alert message="order.error"></alert>

            <div class="panel panel-default">
                <div ng-if="!order.model.id" class="panel-heading">
                    Naujas užsakymas
                </div>
                <div ng-if="order.model.id" class="panel-heading">
                    Užsakymo redagavimas
                </div>

                <div class="panel-body">
                        <fieldset class="form-group">
                            <label for="bike">Dviratis</label>
                            <select ng-model="order.model.bike"
                                    required
                                    class="form-control"
                                    id="bike"
                                    ng-options="b.id as b.model for b in order.bikes">
                            <option value="">Pasirinkite dviratį</option>
                            </select>
                        </fieldset>

                        <fieldset class="form-group">
                            <label for="service">Servisas</label>
                            <select ng-model="order.model.service"
                                    class="form-control"
                                    required
                                    id="service"
                                    ng-options="s.id as s.name for s in order.services">
                                <option value="">Pasirinkite servisą</option>
                            </select>
                        </fieldset>

                        <div class="panel panel-default">
                            <div class="panel-heading">Paslaugos</div>
                            <div class="panel-body">
                                <builder required model="order.model.tasks"
                                         items-map="order.tasks"
                                         builder-id="tasks"
                                         add-label="Pridėti paslaugą">
                                </builder>
                            </div>
                        </div>

                        <div class="panel panel-default" ng-if=order.isAllowed(['mechanic'])>
                            <div class="panel-heading">Dalys</div>
                            <div class="panel-body">
                                <builder model="order.model.parts"
                                         items-map="order.parts"
                                         builder-id="parts"
                                         add-label="Pridėti dalį">
                                </builder>
                            </div>
                        </div>

                        <fieldset class="form-group">
                            <label for="urgent">
                                <input ng-model="order.model.urgent"
                                       type="checkbox"
                                       id="urgent"
                                       ng-true-value="1"
                                       ng-false-value="0"
                                >
                                Skubus
                            </label>
                        </fieldset>

                        <fieldset class="form-group">
                            <label for="comment">Komentarai</label>
                            <textarea
                                    id="comment"
                                    ng-model="bike.model.comment"
                                    class="form-control"
                            ></textarea>
                        </fieldset>
                </div>

                <div class="panel-footer">
                    <button type="submit" class="btn btn-success">Save</button>
                    <a href="orders" class="btn btn-default">Cancel</a>
                </div>
            </div>
        </div>
    </div>
</div>
</form>
